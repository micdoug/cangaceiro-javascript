{"version":3,"sources":["../../../app-src/domain/negociacao/NegociacaoService.js"],"names":["HttpService","Negociacao","NegociacaoService","constructor","_http","obterNegociacoesDaSemana","response","get","console","log","map","Date","objeto","data","quantidade","valor","error","Error","obterNegociacoesSemanaAnterior","obterNegociacoesSemanaRetrasada","obterNegociacoesDoPeriodo","Promise","all","reduce","novoArray","array","concat","sort","left","right","getTime"],"mappings":";;;;;;AAASA,iB,sBAAAA,W;;AACAC,gB,iBAAAA,U;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UAEIC,iB,GAAN,MAAMA,iBAAN,CAAwB;;AAE7BC,sBAAc;AACZ,eAAKC,KAAL,GAAa,IAAIJ,WAAJ,EAAb;AACD;;AAEKK,gCAAN,GAAiC;AAAA;;AAAA;AAC/B,gBAAI;AACF,oBAAMC,WAAW,MAAM,MAAKF,KAAL,CAAWG,GAAX,CAAe,oBAAf,CAAvB;AACAC,sBAAQC,GAAR,CAAYH,QAAZ;AACA,qBAAOA,SAASI,GAAT,CAAa;AAAA,uBAAU,IAAIT,UAAJ,CAAe,IAAIU,IAAJ,CAASC,OAAOC,IAAhB,CAAf,EAC5BD,OAAOE,UADqB,EACTF,OAAOG,KADE,CAAV;AAAA,eAAb,CAAP;AAED,aALD,CAKE,OAAOC,KAAP,EAAc;AACd,oBAAM,IAAIC,KAAJ,CAAU,+CAAV,CAAN;AACD;AAR8B;AAShC;;AAEKC,sCAAN,GAAuC;AAAA;;AAAA;AACrC,gBAAI;AACF,oBAAMZ,WAAW,MAAM,OAAKF,KAAL,CAAWG,GAAX,CAAe,sBAAf,CAAvB;AACA,qBAAOD,SAASI,GAAT,CAAa;AAAA,uBAAU,IAAIT,UAAJ,CAAe,IAAIU,IAAJ,CAASC,OAAOC,IAAhB,CAAf,EAC5BD,OAAOE,UADqB,EACTF,OAAOG,KADE,CAAV;AAAA,eAAb,CAAP;AAED,aAJD,CAIE,OAAOC,KAAP,EAAc;AACd,oBAAM,IAAIC,KAAJ,CAAU,wDAAV,CAAN;AACD;AAPoC;AAQtC;;AAEKE,uCAAN,GAAwC;AAAA;;AAAA;AACtC,gBAAI;AACF,oBAAMb,WAAW,MAAM,OAAKF,KAAL,CAAWG,GAAX,CAAe,uBAAf,CAAvB;AACA,qBAAOD,SAASI,GAAT,CAAa;AAAA,uBAAU,IAAIT,UAAJ,CAAe,IAAIU,IAAJ,CAASC,OAAOC,IAAhB,CAAf,EAC5BD,OAAOE,UADqB,EACTF,OAAOG,KADE,CAAV;AAAA,eAAb,CAAP;AAED,aAJD,CAIE,OAAOC,KAAP,EAAc;AACd,oBAAM,IAAIC,KAAJ,CAAU,yDAAV,CAAN;AACD;AAPqC;AAQvC;;AAEKG,iCAAN,GAAkC;AAAA;;AAAA;AAChC,gBAAI;AACF,qBAAO,CAAC,MAAMC,QAAQC,GAAR,CAAY,CACxB,OAAKjB,wBAAL,EADwB,EAExB,OAAKa,8BAAL,EAFwB,EAGxB,OAAKC,+BAAL,EAHwB,CAAZ,CAAP,EAIHI,MAJG,CAII,UAACC,SAAD,EAAYC,KAAZ;AAAA,uBAAsBD,UAAUE,MAAV,CAAiBD,KAAjB,CAAtB;AAAA,eAJJ,EAImD,EAJnD,EAKJE,IALI,CAKC,UAACC,IAAD,EAAOC,KAAP;AAAA,uBAAiBA,MAAMhB,IAAN,CAAWiB,OAAX,KAAuBF,KAAKf,IAAL,CAAUiB,OAAV,EAAxC;AAAA,eALD,CAAP;AAMD,aAPD,CAOE,OAAOd,KAAP,EAAc;AACdR,sBAAQC,GAAR,CAAYO,KAAZ;AACA,oBAAM,IAAIC,KAAJ,CAAU,+CAAV,CAAN;AACD;AAX+B;AAYjC;AAjD4B,O","file":"NegociacaoService.js","sourcesContent":["import { HttpService } from \"../../util/HttpService.js\";\nimport { Negociacao } from \"./Negociacao.js\";\n\nexport class NegociacaoService {\n\n  constructor() {\n    this._http = new HttpService();\n  }\n\n  async obterNegociacoesDaSemana() {\n    try {\n      const response = await this._http.get(\"negociacoes/semana\");\n      console.log(response);\n      return response.map(objeto => new Negociacao(new Date(objeto.data),\n        objeto.quantidade, objeto.valor));\n    } catch (error) {\n      throw new Error(\"Não foi possível obter negociações da semana.\");\n    }\n  }\n\n  async obterNegociacoesSemanaAnterior() {\n    try {\n      const response = await this._http.get(\"negociacoes/anterior\");\n      return response.map(objeto => new Negociacao(new Date(objeto.data),\n        objeto.quantidade, objeto.valor));\n    } catch (error) {\n      throw new Error(\"Não foi possível obter negociações da semana anterior.\");\n    }\n  }\n\n  async obterNegociacoesSemanaRetrasada() {\n    try {\n      const response = await this._http.get(\"negociacoes/retrasada\");\n      return response.map(objeto => new Negociacao(new Date(objeto.data),\n        objeto.quantidade, objeto.valor));\n    } catch (error) {\n      throw new Error(\"Não foi possível obter negociações da semana retrasada.\");\n    }\n  }\n\n  async obterNegociacoesDoPeriodo() {\n    try {\n      return (await Promise.all([\n        this.obterNegociacoesDaSemana(),\n        this.obterNegociacoesSemanaAnterior(),\n        this.obterNegociacoesSemanaRetrasada()\n      ])).reduce((novoArray, array) => novoArray.concat(array), [])\n        .sort((left, right) => right.data.getTime() - left.data.getTime());\n    } catch (error) {\n      console.log(error);\n      throw new Error(\"Não foi possível obter negociações do período\");\n    }\n  }\n}"]}